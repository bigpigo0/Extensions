<!DOCTYPE html>
<html ng-app="race">
    <head>
        <title>HKJC</title>
        <script src="scripts/jquery-2.1.3.min.js"></script>
        <script src="scripts/angular.min.js"></script>
        <link rel="stylesheet" href="angular-csp.css" />
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="scripts/bootstrap-3.3.4-dist/css/bootstrap.min.css">
        <!-- Optional theme -->
        <link rel="stylesheet" href="scripts/bootstrap-3.3.4-dist/css/bootstrap-theme.min.css">
        <!-- Latest compiled and minified JavaScript -->
        <script src="scripts/bootstrap-3.3.4-dist/js/bootstrap.min.js"></script>
        <script src="scripts/jquery.xml2json.js"></script>
        <script src="scripts/popup.js"></script>
    </head>
    <body ng-controller="RaceController as raceCtrl" ng-init="updateOdds(1)">
        <div style="width: 900px">
            場次:
            <ul class="nav nav-tabs">
                <li role="presentation" ng-model="Number" ng-repeat="n in [] | range:10" ng-class="{ active: Number === n + 1}"><a ng-click="updateOdds($index + 1)">{{ n + 1 }}</a></li>
            </ul>
            <div ng-hide="isEmptyRace()">
                <p>{{ race.RACE_NAME_C }} {{ race.CLASSES_C }} {{ race.DISTANCE + "米" }} {{ race.POST_DATE }} {{ race.POST_TIME }}</p>
            </div>
            <table class="table table-condensed" style="width: 900px">
                <tr>
                    <th>馬號</th>
                    <th>馬名</th>
                    <td>檔位</td>
                    <th>騎師</th>
                    <th>獨贏</th>
                    <th>賠率下降</th>
                    <th>位置</th>
                    <th>賠率下降</th>
                    <th>6次近績</th>
                    <th>各報貼士</th>
                    <th>名次</th>
                </tr>
                <tr ng-repeat="odd in wins" title="{{ '現時評分: ' + race.RUNNER[odd.NUM - 1].RATING }}">
                    <td>{{ odd.NUM }}</td>
                    <td><a id="{{ race.RUNNER[odd.NUM - 1].HORSE_NUM }}" ng-href="{{ 'http://www.hkjc.com/chinese/racing/Horse.asp?HorseNo=' + race.RUNNER[odd.NUM - 1].HORSE_NUM  }}">{{ race.RUNNER[odd.NUM - 1].HORSE_NAME_C }}</a></td>
                    <td>{{ race.RUNNER[odd.NUM - 1].BAR_DRAW }}</td>
                    <td>{{ race.RUNNER[odd.NUM - 1].JOCKEY_NAME_C }}</td>
                    <td ng-style="getOddStyle(odd.HF)">{{ odd.WILLPAY / 1000 }}</td>
                    <td ng-style="getOddDropStyle(odd.ODDSDROP)">{{ odd.ODDSDROP }} %</td>
                    <td ng-style="getOddStyle(plas[odd.NUM - 1].HF)">{{ plas[odd.NUM - 1].MIN_WILLPAY / 1000}}</td>
                    <td ng-style="getOddDropStyle(plas[odd.NUM - 1].ODDSDROP)">{{ plas[odd.NUM - 1].ODDSDROP }} %</td>
                    <td>{{ race.RUNNER[odd.NUM - 1].LAST_SIX_RUNS }}</td>
                    <td>{{ raceCtrl.getTips(race.RUNNER[odd.NUM - 1].HORSE_NAME_C) }}</td>
                    <td>{{ raceCtrl.result[race.RUNNER[odd.NUM - 1].HORSE_NAME_C] }}</td>
                </tr>
            </table>
        </div>
        <footer>
            <p>更新時間: {{ updateDate }} {{ updateTime }}</p>
        </footer>
    </body>
</html>